{% extends "base.html" %}

{% block title %}Manage Prerequisites{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-6">Manage Prerequisites for {{ event.activity_group_name }}</h1>

    <div class="mb-8">
        <h2 class="text-xl font-semibold mb-4">Current Prerequisites</h2>
        {% if prerequisites %}
        <ul class="list-disc pl-6">
            {% for prereq in prerequisites %}
            <li>
                <strong>{{ prereq.activity_group_name }}</strong> - {{ prereq.date }}
                <form method="POST" action="{{ url_for('prerequisites.remove_prerequisite') }}" class="inline">
                    <input type="hidden" name="event_id" value="{{ event.id }}">
                    <input type="hidden" name="prerequisite_event_id" value="{{ prereq.prerequisite_event_id }}">
                    <button type="submit" class="text-red-600 hover:underline">Remove</button>
                </form>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p class="text-gray-600">No prerequisites added yet.</p>
        {% endif %}
    </div>

    <div>
        <h2 class="text-xl font-semibold mb-4">Add New Prerequisite</h2>
        <form method="POST" action="{{ url_for('prerequisites.add_prerequisite') }}">
            <input type="hidden" name="event_id" value="{{ event.id }}">
            <div class="mb-4">
                <label for="prerequisite_event_id" class="block font-medium">Select Event</label>
                <select id="prerequisite_event_id" name="prerequisite_event_id" class="w-full border rounded px-3 py-2">
                    {% for other_event in other_events %}
                    <option value="{{ other_event.id }}">{{ other_event.activity_group_name }} - {{ other_event.date }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="mb-4">
                <label for="minimum_performance" class="block font-medium">Minimum Performance</label>
                <input type="number" id="minimum_performance" name="minimum_performance" class="w-full border rounded px-3 py-2">
            </div>
            <div class="mb-4">
                <label for="qualification_period" class="block font-medium">Qualification Period (days)</label>
                <input type="number" id="qualification_period" name="qualification_period" class="w-full border rounded px-3 py-2">
            </div>
            <div class="mb-4 flex items-center">
                <input type="checkbox" id="is_waiver_allowed" name="is_waiver_allowed" class="mr-2">
                <label for="is_waiver_allowed">Allow Waiver</label>
            </div>
            <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Add Prerequisite</button>
        </form>
    </div>
</div>
{% endblock %}
